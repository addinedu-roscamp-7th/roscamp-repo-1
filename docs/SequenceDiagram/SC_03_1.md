@startuml
title SC_03_1 Shopee 포장대 이동 시퀀스

participant "Shopee\nMain Service" as main
participant "Pickee\nMain Controller" as pickee_main
participant "Pickee\nMobile Controller" as pickee_mobile

activate main

main -> pickee_main: [ROS2 Service] 포장대 이동 명령\n(/pickee/workflow/move_to_packaging)
activate pickee_main

pickee_main -> pickee_main: Global Path\n계획

main <-- pickee_main: [ROS2 Service] 포장대 이동 명령 응답\n(/pickee/workflow/move_to_packaging)

pickee_main -> pickee_mobile: [ROS2 Service] 목적지 이동 명령\n(/pickee/mobile/move_to_location)
activate pickee_mobile

pickee_mobile -> pickee_mobile: 경로 주행

pickee_mobile --> pickee_main: [ROS2 Service] 목적지 이동 명령 응답\n(/pickee/mobile/move_to_location)

pickee_mobile -> pickee_main: [ROS2 Topic] 도착 알림\n(/pickee/mobile/arrival)
deactivate pickee_mobile

pickee_main -> main: [ROS2 Topic] 도착 보고\n(/pickee/arrival_notice)

deactivate pickee_main

pickee_main -> pickee_main: 장바구니 교체\n직원 안내음 송출

pickee_main -> pickee_main: Pickee 상태 변경\n(MOVING_TO_PACKING->WAITING_HANDOVER)

deactivate main

@enduml