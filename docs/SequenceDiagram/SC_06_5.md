@startuml SC_06_5_Pickee_적재완료및이동
!theme plain

actor 사용자
participant "LLM Service" as LLM
participant "Pickee\nMain Controller" as MainCtrl
participant "Pickee\nMobile Controller" as MobileCtrl

== 상품 적재 완료 ==

사용자 -> MainCtrl: 음성 "적재 완료"
activate MainCtrl
MainCtrl -> MainCtrl: STT (음성 → 텍스트)
MainCtrl -> LLM: [HTTP] 텍스트 전달\n(IF_HTTP_02: intent_detection)
activate LLM
LLM -> LLM: 텍스트 분석
LLM --> MainCtrl: 텍스트 분석 결과
deactivate LLM

MainCtrl -> MainCtrl: 음성 송출 ("적재 완료 확인")
MainCtrl -> MainCtrl: 저장된 직원 위치로\nGlobal Path 계획

== 목적지 이동 ==

MainCtrl -> MobileCtrl: [Service] 목적지 이동 명령\n(/pickee/mobile/move_to_location)
activate MobileCtrl
MobileCtrl --> MainCtrl: [Service Resp] 목적지 이동 명령 응답

MobileCtrl -> MobileCtrl: Local Path Planning
MobileCtrl -> MobileCtrl: 경로 추종
MobileCtrl -> MobileCtrl: 목적지 이동 확인
MobileCtrl --> MainCtrl: [Topic] 도착 알림\n(/pickee/mobile/arrival)
deactivate MobileCtrl

== 도착 안내 ==

MainCtrl -> MainCtrl: 음성 송출 ("요청하신 상품이 도착했습니다.")
deactivate MainCtrl

@enduml
