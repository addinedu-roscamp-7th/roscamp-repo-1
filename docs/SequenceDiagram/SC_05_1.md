<!-- 로봇 정보 표시 -->
@startuml
title 관리자 모니터링 - 로봇 정보 표시
actor User as user
participant "Shopee App" as shopee
participant "Pickee\nMain Controller" as pickee
participant "Packee\nMain Controller" as packee

user -> shopee: Dashboard 버튼 클릭
activate shopee

shopee -> shopee: 대시보드\n화면 전환

loop 30초 마다\n정보 갱신
    shopee -> pickee: [ROS2 Topic] Pickee 로봇 정보\n(pickee/robot_status)
    activate pickee
    pickee --> shopee: 
    deactivate pickee
    
    shopee -> packee: [ROS2 Topic] Packee 로봇 정보\n(packee/robot_status)
    activate packee
    packee --> shopee: 
    deactivate packee
    
    shopee -> shopee: 전체 로봇\n정보 표시
end

deactivate shopee

@enduml


<!-- 로봇 위치 표시 -->
@startuml
title 관리자 모니터링 - 로봇 위치 표시
participant "Shopee App" as shopee
participant "Pickee\nMain Controller" as pickee

loop
    shopee -> pickee: [ROS2 Topic] 피키 로봇 위치 정보\n(pickee/robot_status)
    activate pickee
    pickee --> shopee: 
    deactivate pickee
    
    shopee -> shopee: 전체 로봇\n정보 표시
end

@enduml


<!-- 로봇 시야 확인 -->
@startuml
title 관리자 모니터링 - 로봇 시야 확인
participant "Shopee App" as app
participant "Shopee\nMain Service" as shopee
participant "Pickee\nMain Service" as pickee
participant "Pickee\nVision AI Service" as vision

app -> shopee: [TCP] 영상 송출 시작 요청\n(video_stream_start)
activate shopee

shopee -> pickee: [ROS2] 영상 송출 시작 요청\n(/pickee/video_stream/start)
activate pickee

pickee -> vision: [ROS2] 영상 송출 시작 요청\n(/pickee/video_stream/start)
activate vision

vision --> pickee: [ROS2] 영상 송출 시작 응답\n(/pickee/video_stream/start)
deactivate vision

pickee --> shopee: [ROS2] 영상 송출 시작 응답\n(/pickee/video_stream/start)
deactivate pickee

shopee --> app: [TCP] 영상 송출 시작 응답\n(video_stream_start)
deactivate shopee

loop
    vision -> shopee: [UDP] 영상 송출\n(video_frame)
    activate shopee
    
    shopee -> app: [UDP] 영상 송출\n(video_frame)
    activate app
    
    app -> app: 영상\n화면 표시
    deactivate app
    deactivate shopee
end

@enduml


<!-- 로봇 상태 조회 -->
@startuml
title 관리자 모니터링 - 로봇 상태 조회
participant "Shopee App" as app
participant "Shopee\nMain Service" as shopee
participant "DB Manager" as db
participant "Pickee\nMain Controller" as pickee
participant "Packee\nMain Controller" as packee

shopee -> db: 고객 정보 요청\n(customer.id)
activate db

db --> shopee: 고객 정보\n(name, allergy_info, is_vegan)
deactivate db

shopee -> app: [TCP] 작업 정보\n(work_info_notification)
activate app
deactivate app

loop
    pickee -> app: [ROS2] 피키 로봇 정보\n(/pickee/robot_status)
    activate app
    
    packee -> app: [ROS2] 패키 로봇 정보\n(/packee/robot_status)
    
    app -> app: 로봇 상태\n정보 표시
    deactivate app
end

@enduml


<!-- 진행율 및 포장 정보 확인 -->
@startuml
title 관리자 모니터링 - 진행율 및 포장 정보 확인
participant "Shopee App" as app
participant "Shopee\nMain Service" as shopee
participant "DB Manager" as db

shopee -> db: 포장 정보 요청\n(order_info.id)
activate db

db --> shopee: 포장 정보\n(product.id, name, price, quantity)
deactivate db

shopee -> app: [TCP] 포장 정보\n(packing_info_notification)
activate app

app -> app: 선행품\n카트 표시

app -> app: 작재 정보 표시

deactivate app

@enduml