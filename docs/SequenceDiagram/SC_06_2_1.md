@startuml SC_06_2_1_Pickee_직원등록
!theme plain

participant "Pickee\nMain Controller" as MainCtrl
participant "Pickee\nVision AI Service" as Vision

== 재고 보충 모드 시작 ==

activate MainCtrl
MainCtrl -> MainCtrl: 음성 송출 ("재고 보충 모드를 시작합니다")
MainCtrl -> MainCtrl: 음성 송출 ("등록을 시작합니다.")

== Vision 등록 모드 전환 ==

MainCtrl -> Vision: [Service] 인식 모드 전환 요청\n(/pickee/vision/set_mode)
activate Vision
Vision -> Vision: 인식 모드 전환 (주행모드 → 등록모드)
Vision --> MainCtrl: [Service Resp] 인식 모드 전환 성공
deactivate Vision

== 직원 외형 등록 ==

MainCtrl -> Vision: [Service] 직원 등록 요청\n(/pickee/vision/register_staff)
activate Vision
Vision --> MainCtrl: [Service Resp] 등록 절차 시작
deactivate Vision

group 비동기 작업 (Async Task)
    Vision -> MainCtrl: [Service] 음성 송출 요청\n(/pickee/tts_request)
    activate MainCtrl
    MainCtrl -> MainCtrl: 음성 송출 ("카메라 정면을 봐주세요.")
    MainCtrl --> Vision: [Service Resp] 음성 송출 완료
    deactivate MainCtrl
    Vision -> Vision: 정면 특징 추출

    Vision -> MainCtrl: [Service] 음성 송출 요청\n(/pickee/tts_request)
    activate MainCtrl
    MainCtrl -> MainCtrl: 음성 송출 ("뒤로 돌아주세요.")
    MainCtrl --> Vision: [Service Resp] 음성 송출 완료
    deactivate MainCtrl
    Vision -> Vision: 후면 특징 추출 및 최종 저장

    Vision -> MainCtrl: [Topic] 등록 결과 전송\n(/pickee/vision/register_staff_result)
end

MainCtrl -> MainCtrl: 음성 송출 ("등록이 완료되었습니다.")
deactivate MainCtrl

@enduml
