@startuml SC_06_4_Pickee_이동및도착안내
!theme plain
skinparam backgroundColor #FFFFFF
skinparam sequenceMessageAlign center

participant "Pickee\nMain Controller" as pickee_main
participant "Pickee\nMobile Controller" as pickee_mobile

== 이동 경로 계획 및 주행 ==
activate pickee_main

pickee_main -> pickee_mobile: [ROS2 Service] 목적지 이동 명령\n(/pickee/mobile/move_to_location)\n+ 목적지 좌표만 전달
activate pickee_mobile

pickee_mobile -> pickee_mobile: Global Path 자동 생성\n(A* 알고리즘 등)
activate pickee_mobile #DarkSalmon
deactivate pickee_mobile

pickee_mobile --> pickee_main: [ROS2 Service] 목적지 이동 명령 응답\n(/pickee/mobile/move_to_location)

pickee_mobile -> pickee_mobile: Local Path Planning\n(실시간 LiDAR 장애물 회피)
activate pickee_mobile #DarkSalmon
deactivate pickee_mobile

pickee_mobile -> pickee_mobile: 경로 추종
activate pickee_mobile #DarkSalmon
deactivate pickee_mobile

pickee_mobile -> pickee_mobile: 목적지 도착 확인
activate pickee_mobile #DarkSalmon
deactivate pickee_mobile

pickee_mobile --> pickee_main: [ROS2 Topic] 도착 알림\n(/pickee/mobile/arrival)
deactivate pickee_mobile

pickee_main -> pickee_main: Pickee 상태 변경\n(MOVING_TO_DESTINATION->WAITING_COMPLETE)
activate pickee_main #DarkSalmon
deactivate pickee_main


== 도착 후 안내 ==

pickee_main -> pickee_main: 음성 안내 ("목적지에 도착하였습니다.")
activate pickee_main #DarkSalmon
deactivate pickee_main

deactivate pickee_main

@enduml
